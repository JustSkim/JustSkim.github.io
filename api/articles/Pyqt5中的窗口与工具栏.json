{"title":"Pyqt5中的窗口与工具栏","slug":"Pyqt5中的窗口与工具栏","date":"2021-08-30T20:45:49.898Z","updated":"2021-08-30T20:55:29.290Z","comments":true,"path":"api/articles/Pyqt5中的窗口与工具栏.json","photos":[],"link":"","excerpt":null,"covers":null,"content":"<h1 id=\"Pyqt5中的窗口与工具栏\"><a href=\"#Pyqt5中的窗口与工具栏\" class=\"headerlink\" title=\"Pyqt5中的窗口与工具栏\"></a>Pyqt5中的窗口与工具栏</h1><h2 id=\"主窗口\"><a href=\"#主窗口\" class=\"headerlink\" title=\"主窗口\"></a>主窗口</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python3</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">例子：主窗口</span></span><br><span class=\"line\"><span class=\"string\">ZetCode PyQt5 tutorial </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">This program creates a skeleton of</span></span><br><span class=\"line\"><span class=\"string\">a classic GUI application with a menubar,</span></span><br><span class=\"line\"><span class=\"string\">toolbar, statusbar, and a central widget. </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Author: Jan Bodnar</span></span><br><span class=\"line\"><span class=\"string\">Website: zetcode.com </span></span><br><span class=\"line\"><span class=\"string\">Last edited: August 2017</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtWidgets <span class=\"keyword\">import</span> QMainWindow, QTextEdit, QAction, QApplication</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtGui <span class=\"keyword\">import</span> QIcon</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Example</span>(<span class=\"params\">QMainWindow</span>):</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__()</span><br><span class=\"line\"></span><br><span class=\"line\">        self.initUI()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initUI</span>(<span class=\"params\">self</span>):</span>               </span><br><span class=\"line\"></span><br><span class=\"line\">        textEdit = QTextEdit()</span><br><span class=\"line\">        self.setCentralWidget(textEdit)</span><br><span class=\"line\">        <span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">        创建了一个文本编辑区域，并把它放在QMainWindow的中间区域，这个组件会占满所有剩余的区域。</span></span><br><span class=\"line\"><span class=\"string\">        &#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        exitAct = QAction(QIcon(<span class=\"string\">&#x27;exit24.png&#x27;</span>), <span class=\"string\">&#x27;Exit&#x27;</span>, self)</span><br><span class=\"line\">        <span class=\"comment\">#当鼠标移至工具栏中的该图标时，会显示这里的文字‘Exit’</span></span><br><span class=\"line\"></span><br><span class=\"line\">        exitAct.setShortcut(<span class=\"string\">&#x27;Ctrl+Q&#x27;</span>)       <span class=\"comment\">#设置该动作的相关快捷键</span></span><br><span class=\"line\">        exitAct.setStatusTip(<span class=\"string\">&#x27;Exit application&#x27;</span>)</span><br><span class=\"line\">        exitAct.triggered.connect(self.close)</span><br><span class=\"line\"></span><br><span class=\"line\">        self.statusBar()    <span class=\"comment\">#创建一个状态栏</span></span><br><span class=\"line\"></span><br><span class=\"line\">        menubar = self.menuBar()    <span class=\"comment\">#创建一个菜单栏</span></span><br><span class=\"line\">        fileMenu = menubar.addMenu(<span class=\"string\">&#x27;&amp;File&#x27;</span>) <span class=\"comment\">#这里的符号&#x27;&amp;&#x27;不会在菜单栏选项中显示出来</span></span><br><span class=\"line\">        fileMenu.addAction(exitAct)</span><br><span class=\"line\"></span><br><span class=\"line\">        toolbar = self.addToolBar(<span class=\"string\">&#x27;Exit&#x27;</span>)  <span class=\"comment\">#addToolBar()创建工具栏</span></span><br><span class=\"line\">        toolbar.addAction(exitAct)         <span class=\"comment\">#工具栏添加一个选项</span></span><br><span class=\"line\"></span><br><span class=\"line\">        self.setGeometry(<span class=\"number\">300</span>, <span class=\"number\">300</span>, <span class=\"number\">350</span>, <span class=\"number\">250</span>)</span><br><span class=\"line\">        self.setWindowTitle(<span class=\"string\">&#x27;Main window&#x27;</span>)    </span><br><span class=\"line\">        self.show()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">    app = QApplication(sys.argv)</span><br><span class=\"line\">    ex = Example()</span><br><span class=\"line\">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"状态栏\"><a href=\"#状态栏\" class=\"headerlink\" title=\"状态栏\"></a>状态栏</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python3</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">例1：状态栏</span></span><br><span class=\"line\"><span class=\"string\">ZetCode PyQt5 tutorial </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">This program creates a statusbar.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Author: Jan Bodnar</span></span><br><span class=\"line\"><span class=\"string\">Website: zetcode.com </span></span><br><span class=\"line\"><span class=\"string\">Last edited: August 2017</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtWidgets <span class=\"keyword\">import</span> QMainWindow, QApplication</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#状态栏由QMainWindow创建</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Example</span>(<span class=\"params\">QMainWindow</span>):</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"comment\">#super() 函数是用于调用父类(超类)的一个方法。super ().__init__ ()，就是继承父类的init方法</span></span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__()</span><br><span class=\"line\"></span><br><span class=\"line\">        self.initUI()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initUI</span>(<span class=\"params\">self</span>):</span>               </span><br><span class=\"line\"></span><br><span class=\"line\">        self.statusBar().showMessage(<span class=\"string\">&#x27;Ready&#x27;</span>)</span><br><span class=\"line\">        <span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">        调用QtGui.QMainWindow类的statusBar()方法，创建状态栏。</span></span><br><span class=\"line\"><span class=\"string\">        第一次调用会创建一个状态栏，而再次调用会返回一个状态栏对象。showMessage()方法在状态栏上显示一条信息。</span></span><br><span class=\"line\"><span class=\"string\">        &#x27;&#x27;&#x27;</span></span><br><span class=\"line\">        self.setGeometry(<span class=\"number\">300</span>, <span class=\"number\">300</span>, <span class=\"number\">250</span>, <span class=\"number\">150</span>)</span><br><span class=\"line\">        self.setWindowTitle(<span class=\"string\">&#x27;Statusbar&#x27;</span>)    </span><br><span class=\"line\">        self.show()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">    app = QApplication(sys.argv)</span><br><span class=\"line\">    ex = Example()</span><br><span class=\"line\">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n<h2 id=\"菜单栏\"><a href=\"#菜单栏\" class=\"headerlink\" title=\"菜单栏\"></a>菜单栏</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python3</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">例2：菜单栏</span></span><br><span class=\"line\"><span class=\"string\">ZetCode PyQt5 tutorial </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">This program creates a menubar. The</span></span><br><span class=\"line\"><span class=\"string\">menubar has one menu with an exit action.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Author: Jan Bodnar</span></span><br><span class=\"line\"><span class=\"string\">Website: zetcode.com </span></span><br><span class=\"line\"><span class=\"string\">Last edited: January 2017</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtWidgets <span class=\"keyword\">import</span> QMainWindow, QAction, qApp, QApplication</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtGui <span class=\"keyword\">import</span> QIcon</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Example</span>(<span class=\"params\">QMainWindow</span>):</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__()</span><br><span class=\"line\"></span><br><span class=\"line\">        self.initUI()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initUI</span>(<span class=\"params\">self</span>):</span>               </span><br><span class=\"line\"></span><br><span class=\"line\">        exitAct = QAction(QIcon(<span class=\"string\">&#x27;exit.png&#x27;</span>), <span class=\"string\">&#x27;&amp;Exit&#x27;</span>, self)        </span><br><span class=\"line\">        exitAct.setShortcut(<span class=\"string\">&#x27;Ctrl+Q&#x27;</span>)</span><br><span class=\"line\">        exitAct.setStatusTip(<span class=\"string\">&#x27;Exit application&#x27;</span>)</span><br><span class=\"line\">        <span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">        QAction是菜单栏、工具栏或者快捷键的动作的组合。</span></span><br><span class=\"line\"><span class=\"string\">        上面三行中，前两行创建了一个图标、一个exit的标签和一个快捷键组合，都执行了一个动作；</span></span><br><span class=\"line\"><span class=\"string\">        第三行，创建了一个状态栏，当鼠标悬停在菜单栏的时候，能显示当前状态。</span></span><br><span class=\"line\"><span class=\"string\">        &#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        exitAct.triggered.connect(qApp.quit)</span><br><span class=\"line\">        <span class=\"comment\">#当执行这个指定的动作时，就触发了一个事件。这个事件跟QApplication的quit()行为相关联，所以这个动作就能终止这个应用。</span></span><br><span class=\"line\"></span><br><span class=\"line\">        self.statusBar()</span><br><span class=\"line\"></span><br><span class=\"line\">        menubar = self.menuBar()    <span class=\"comment\">#创建一个菜单栏（位于顶部固定位置）</span></span><br><span class=\"line\">        <span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">        QMenu和QMenuBar是Qt中的菜单类(也就是右键菜单)和菜单栏类，其中，菜单QMenu挂载在菜单栏QMenuBar上</span></span><br><span class=\"line\"><span class=\"string\">        &#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        fileMenu = menubar.addMenu(<span class=\"string\">&#x27;&amp;File&#x27;</span>)</span><br><span class=\"line\">        fileMenu.addAction(exitAct)</span><br><span class=\"line\">        <span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">        menuBar()创建菜单栏。这里创建了一个菜单栏，并用addMenu()在上面添加了一个file菜单，</span></span><br><span class=\"line\"><span class=\"string\">        用addAction()关联了点击退出应用的事件/动作（也就是可直接进行的选项而非子级菜单）。</span></span><br><span class=\"line\"><span class=\"string\">        &#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        self.setGeometry(<span class=\"number\">300</span>, <span class=\"number\">300</span>, <span class=\"number\">300</span>, <span class=\"number\">200</span>)</span><br><span class=\"line\">        self.setWindowTitle(<span class=\"string\">&#x27;Simple menu&#x27;</span>)    </span><br><span class=\"line\">        self.show()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">    app = QApplication(sys.argv)</span><br><span class=\"line\">    ex = Example()</span><br><span class=\"line\">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n<h2 id=\"子菜单\"><a href=\"#子菜单\" class=\"headerlink\" title=\"子菜单\"></a>子菜单</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python3</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">例3：子菜单</span></span><br><span class=\"line\"><span class=\"string\">ZetCode PyQt5 tutorial </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">This program creates a submenu.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Author: Jan Bodnar</span></span><br><span class=\"line\"><span class=\"string\">Website: zetcode.com </span></span><br><span class=\"line\"><span class=\"string\">Last edited: August 2017</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtGui <span class=\"keyword\">import</span> QIcon</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtWidgets <span class=\"keyword\">import</span> QMainWindow, QAction, QMenu, QApplication</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Example</span>(<span class=\"params\">QMainWindow</span>):</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__()</span><br><span class=\"line\"></span><br><span class=\"line\">        self.initUI()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initUI</span>(<span class=\"params\">self</span>):</span>         </span><br><span class=\"line\">        self.setWindowIcon(QIcon(<span class=\"string\">&#x27;icon.png&#x27;</span>))  <span class=\"comment\">#设置图标</span></span><br><span class=\"line\">        menubar = self.menuBar()</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">#菜单栏上一个没有子级菜单的纯粹选项（动作）</span></span><br><span class=\"line\">        GoAction = menubar.addAction(<span class=\"string\">&quot;GOOOOOOOOoo&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">        主菜单栏第一项为File，其下添加两个动作（addAction(impAct)）New和Save，</span></span><br><span class=\"line\"><span class=\"string\">        添加两个子级菜单(addMenu(impMenu))Import和Import2</span></span><br><span class=\"line\"><span class=\"string\">        &#x27;&#x27;&#x27;</span></span><br><span class=\"line\">        fileMenu = menubar.addMenu(<span class=\"string\">&#x27;File&#x27;</span>)</span><br><span class=\"line\">        </span><br><span class=\"line\">        impMenu = QMenu(<span class=\"string\">&#x27;Import&#x27;</span>, self) <span class=\"comment\">#定义一个子菜单 Import</span></span><br><span class=\"line\">        impAct = QAction(<span class=\"string\">&#x27;Import mail&#x27;</span>, self) <span class=\"comment\">#在子菜单Import下的子级菜单 Import mail</span></span><br><span class=\"line\">        impMenu.addAction(impAct) <span class=\"comment\">#用addAction()关联事件————悬浮在Import时会出现Import mail。</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        impMenu2 = QMenu(<span class=\"string\">&#x27;Import2&#x27;</span>, self)</span><br><span class=\"line\">        impAct2 = QAction(<span class=\"string\">&#x27;Import mail2&#x27;</span>, self)</span><br><span class=\"line\">        impMenu2.addAction(impAct2)</span><br><span class=\"line\">        </span><br><span class=\"line\">        newAct = QAction(<span class=\"string\">&#x27;New一个&#x27;</span>, self)        </span><br><span class=\"line\">        save = QAction(<span class=\"string\">&#x27;Save保存文件&#x27;</span>,self)</span><br><span class=\"line\"></span><br><span class=\"line\">        fileMenu.addAction(newAct)<span class=\"comment\">#添加了菜单下的一个动作（也就是可直接进行的选项而非子级菜单）</span></span><br><span class=\"line\">        fileMenu.addAction(save) <span class=\"comment\">#添加了动作“Save保存文件”，注意顺序在new之后</span></span><br><span class=\"line\">        fileMenu.addMenu(impMenu)<span class=\"comment\">#添加了子菜单，注意函数addMenu是和添加主菜单一样的</span></span><br><span class=\"line\">        fileMenu.addMenu(impMenu2)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">#定义菜单栏的选项edit</span></span><br><span class=\"line\">        editMenu = menubar.addMenu(<span class=\"string\">&quot;Edit&quot;</span>)</span><br><span class=\"line\">        </span><br><span class=\"line\">        impMenu_edit = QMenu(<span class=\"string\">&quot;write in Chinese&quot;</span>,self)</span><br><span class=\"line\">        editMenu.addMenu(impMenu_edit)</span><br><span class=\"line\"></span><br><span class=\"line\">        impAct_edit = QAction(<span class=\"string\">&quot;give up&quot;</span>,self)</span><br><span class=\"line\">        editMenu.addAction(impAct_edit)</span><br><span class=\"line\"></span><br><span class=\"line\">        self.setGeometry(<span class=\"number\">300</span>, <span class=\"number\">300</span>, <span class=\"number\">300</span>, <span class=\"number\">200</span>)</span><br><span class=\"line\">        self.setWindowTitle(<span class=\"string\">&#x27;Submenu&#x27;</span>)    </span><br><span class=\"line\">        self.show()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">    app = QApplication(sys.argv)</span><br><span class=\"line\">    ex = Example()</span><br><span class=\"line\">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n<h2 id=\"勾选菜单\"><a href=\"#勾选菜单\" class=\"headerlink\" title=\"勾选菜单\"></a>勾选菜单</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python3</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">例4：勾选菜单</span></span><br><span class=\"line\"><span class=\"string\">ZetCode PyQt5 tutorial </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">This program creates a optional menu.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Author: Jan Bodnar</span></span><br><span class=\"line\"><span class=\"string\">Website: zetcode.com </span></span><br><span class=\"line\"><span class=\"string\">Last edited: August 2017</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> typing <span class=\"keyword\">import</span> ValuesView</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtWidgets <span class=\"keyword\">import</span> QMainWindow, QAction, QApplication</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Example</span>(<span class=\"params\">QMainWindow</span>):</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__()</span><br><span class=\"line\"></span><br><span class=\"line\">        self.initUI()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initUI</span>(<span class=\"params\">self</span>):</span>         </span><br><span class=\"line\">        </span><br><span class=\"line\">        self.statusbar = self.statusBar()</span><br><span class=\"line\">        self.statusbar.showMessage(<span class=\"string\">&#x27;Ready&#x27;</span>)   <span class=\"comment\">#状态栏显示</span></span><br><span class=\"line\"></span><br><span class=\"line\">        menubar = self.menuBar()</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">#本例创建了一个行为菜单。这个行为／动作能切换状态栏显示或者隐藏。</span></span><br><span class=\"line\"></span><br><span class=\"line\">        viewMenu = menubar.addMenu(<span class=\"string\">&#x27;View&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        viewStatAct = QAction(text=<span class=\"string\">&#x27;View statusbar&#x27;</span>, parent=self, checkable=<span class=\"literal\">True</span>)</span><br><span class=\"line\">        <span class=\"comment\">#checkable选项为True，意味着所创建的这一个 动作（父级菜单的子项） 能被选中</span></span><br><span class=\"line\"></span><br><span class=\"line\">        viewStatAct.setStatusTip(<span class=\"string\">&#x27;View statusbar&#x27;</span>)</span><br><span class=\"line\">        viewStatAct.setChecked(<span class=\"literal\">True</span>)    <span class=\"comment\">#设置该动作的默认状态为选中状态</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        viewStatAct.triggered.connect(self.toggleMenu)<span class=\"comment\">#绑定动作激活时的事件</span></span><br><span class=\"line\"></span><br><span class=\"line\">        viewMenu.addAction(viewStatAct)</span><br><span class=\"line\">        </span><br><span class=\"line\"></span><br><span class=\"line\">        self.setGeometry(<span class=\"number\">300</span>, <span class=\"number\">300</span>, <span class=\"number\">300</span>, <span class=\"number\">200</span>)</span><br><span class=\"line\">        self.setWindowTitle(<span class=\"string\">&#x27;Check menu&#x27;</span>)    </span><br><span class=\"line\">        self.show()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">toggleMenu</span>(<span class=\"params\">self, state</span>):</span></span><br><span class=\"line\">        <span class=\"comment\">#根据是否打钩来决定是否显示底部的状态栏</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> state:</span><br><span class=\"line\">            self.statusbar.show()</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            self.statusbar.hide()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">    app = QApplication(sys.argv)</span><br><span class=\"line\">    ex = Example()</span><br><span class=\"line\">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n<h2 id=\"右键菜单\"><a href=\"#右键菜单\" class=\"headerlink\" title=\"右键菜单\"></a>右键菜单</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python3</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">例5：右键菜单</span></span><br><span class=\"line\"><span class=\"string\">ZetCode PyQt5 tutorial </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">This program creates a context menu.</span></span><br><span class=\"line\"><span class=\"string\">context有内容、上下文的意思，context menu意为右键菜单（上下文菜单）</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Author: Jan Bodnar</span></span><br><span class=\"line\"><span class=\"string\">Website: zetcode.com </span></span><br><span class=\"line\"><span class=\"string\">Last edited: August 2017</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtWidgets <span class=\"keyword\">import</span> QMainWindow, qApp, QMenu, QApplication</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Example</span>(<span class=\"params\">QMainWindow</span>):</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__()</span><br><span class=\"line\"></span><br><span class=\"line\">        self.initUI()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initUI</span>(<span class=\"params\">self</span>):</span>         </span><br><span class=\"line\"></span><br><span class=\"line\">        self.setGeometry(<span class=\"number\">300</span>, <span class=\"number\">300</span>, <span class=\"number\">300</span>, <span class=\"number\">200</span>)</span><br><span class=\"line\">        self.setWindowTitle(<span class=\"string\">&#x27;Context menu&#x27;</span>)    </span><br><span class=\"line\">        self.show()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">    利用右键菜单事件 QWidget::contextMenuEvent() 来处理右键事件，所以需要重写此函数</span></span><br><span class=\"line\"><span class=\"string\">    &#x27;&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">contextMenuEvent</span>(<span class=\"params\">self, event</span>):</span></span><br><span class=\"line\">            <span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">            The QMenu class provides a menu widget for use in menu bars, context menus, and other popup menus</span></span><br><span class=\"line\"><span class=\"string\">            &#x27;&#x27;&#x27;</span></span><br><span class=\"line\">            cmenu = QMenu(<span class=\"string\">&#x27;这里的文字不会显示，有无均可&#x27;</span>,self) <span class=\"comment\">#使用QMenu创建一个上下文菜单，即右键菜单</span></span><br><span class=\"line\"></span><br><span class=\"line\">            newAct = cmenu.addAction(<span class=\"string\">&quot;New&quot;</span>)     <span class=\"comment\">#添加了一名为“New”的动作</span></span><br><span class=\"line\">            opnAct = cmenu.addAction(<span class=\"string\">&quot;Open&quot;</span>)</span><br><span class=\"line\">            quitAct = cmenu.addAction(<span class=\"string\">&quot;Quit&quot;</span>)</span><br><span class=\"line\">            action = cmenu.exec_(self.mapToGlobal(event.pos()))</span><br><span class=\"line\">            <span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">            使用exec_()方法显示菜单。从鼠标右键事件对象中获得当前坐标。mapToGlobal()方法把当前组件的相对坐标转换为窗口（window）的绝对坐标。</span></span><br><span class=\"line\"><span class=\"string\">            &#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">            如果点击右键菜单中的Quit动作，则退出</span></span><br><span class=\"line\"><span class=\"string\">            右键菜单里触发了事件，也就触发了退出事件，执行关闭菜单行为</span></span><br><span class=\"line\"><span class=\"string\">            &#x27;&#x27;&#x27;</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> action == quitAct:</span><br><span class=\"line\">                qApp.quit() </span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                <span class=\"built_in\">print</span>(<span class=\"string\">&quot;现在执行的动作不是quitAct&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">    app = QApplication(sys.argv)</span><br><span class=\"line\">    ex = Example()</span><br><span class=\"line\">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n<h2 id=\"工具栏\"><a href=\"#工具栏\" class=\"headerlink\" title=\"工具栏\"></a>工具栏</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python3</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">例子：工具栏</span></span><br><span class=\"line\"><span class=\"string\">ZetCode PyQt5 tutorial </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">This program creates a toolbar.</span></span><br><span class=\"line\"><span class=\"string\">The toolbar has one action, which</span></span><br><span class=\"line\"><span class=\"string\">terminates the application, if triggered.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Author: Jan Bodnar</span></span><br><span class=\"line\"><span class=\"string\">Website: zetcode.com </span></span><br><span class=\"line\"><span class=\"string\">Last edited: August 2017</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtWidgets <span class=\"keyword\">import</span> QMainWindow, QAction, qApp, QApplication</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtGui <span class=\"keyword\">import</span> QIcon</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Example</span>(<span class=\"params\">QMainWindow</span>):</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__()</span><br><span class=\"line\"></span><br><span class=\"line\">        self.initUI()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initUI</span>(<span class=\"params\">self</span>):</span>               </span><br><span class=\"line\"></span><br><span class=\"line\">        exitAct = QAction(icon=QIcon(<span class=\"string\">&#x27;exit24.png&#x27;</span>), text=<span class=\"string\">&#x27;Exittttt&#x27;</span>, parent=self)</span><br><span class=\"line\">        exitAct.setShortcut(<span class=\"string\">&#x27;Ctrl+Q&#x27;</span>)</span><br><span class=\"line\">        exitAct.triggered.connect(qApp.quit)</span><br><span class=\"line\">        <span class=\"comment\">#行为被触发的时候，会调用QtGui.QMainWindow的quit方法退出应用</span></span><br><span class=\"line\"></span><br><span class=\"line\">        self.toolbar = self.addToolBar(<span class=\"string\">&#x27;Exit&#x27;</span>)<span class=\"comment\">#addToolBar()创建工具栏</span></span><br><span class=\"line\">        <span class=\"comment\">#‘Exit’不会显示在工具栏中，当鼠标移至该图标时，会显示文字‘Exittttt’而非‘Exit’</span></span><br><span class=\"line\"></span><br><span class=\"line\">        self.toolbar.addAction(exitAct) <span class=\"comment\">#将动作添加到工具栏</span></span><br><span class=\"line\">        </span><br><span class=\"line\"></span><br><span class=\"line\">        self.setGeometry(<span class=\"number\">300</span>, <span class=\"number\">300</span>, <span class=\"number\">300</span>, <span class=\"number\">200</span>)</span><br><span class=\"line\">        self.setWindowTitle(<span class=\"string\">&#x27;Toolbar&#x27;</span>)    </span><br><span class=\"line\">        self.show()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">    app = QApplication(sys.argv)</span><br><span class=\"line\">    ex = Example()</span><br><span class=\"line\">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n<h2 id=\"主窗口-1\"><a href=\"#主窗口-1\" class=\"headerlink\" title=\"主窗口\"></a>主窗口</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python3</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">例子：主窗口</span></span><br><span class=\"line\"><span class=\"string\">ZetCode PyQt5 tutorial </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">This program creates a skeleton of</span></span><br><span class=\"line\"><span class=\"string\">a classic GUI application with a menubar,</span></span><br><span class=\"line\"><span class=\"string\">toolbar, statusbar, and a central widget. </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Author: Jan Bodnar</span></span><br><span class=\"line\"><span class=\"string\">Website: zetcode.com </span></span><br><span class=\"line\"><span class=\"string\">Last edited: August 2017</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtWidgets <span class=\"keyword\">import</span> QMainWindow, QTextEdit, QAction, QApplication</span><br><span class=\"line\"><span class=\"keyword\">from</span> PyQt5.QtGui <span class=\"keyword\">import</span> QIcon</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Example</span>(<span class=\"params\">QMainWindow</span>):</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__()</span><br><span class=\"line\"></span><br><span class=\"line\">        self.initUI()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initUI</span>(<span class=\"params\">self</span>):</span>               </span><br><span class=\"line\"></span><br><span class=\"line\">        textEdit = QTextEdit()</span><br><span class=\"line\">        self.setCentralWidget(textEdit)</span><br><span class=\"line\">        <span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">        创建了一个文本编辑区域，并把它放在QMainWindow的中间区域，这个组件会占满所有剩余的区域。</span></span><br><span class=\"line\"><span class=\"string\">        &#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        exitAct = QAction(QIcon(<span class=\"string\">&#x27;exit24.png&#x27;</span>), <span class=\"string\">&#x27;Exit&#x27;</span>, self)</span><br><span class=\"line\">        <span class=\"comment\">#当鼠标移至工具栏中的该图标时，会显示这里的文字‘Exit’</span></span><br><span class=\"line\"></span><br><span class=\"line\">        exitAct.setShortcut(<span class=\"string\">&#x27;Ctrl+Q&#x27;</span>)       <span class=\"comment\">#设置该动作的相关快捷键</span></span><br><span class=\"line\">        exitAct.setStatusTip(<span class=\"string\">&#x27;Exit application&#x27;</span>)</span><br><span class=\"line\">        exitAct.triggered.connect(self.close)</span><br><span class=\"line\"></span><br><span class=\"line\">        self.statusBar()    <span class=\"comment\">#创建一个状态栏</span></span><br><span class=\"line\"></span><br><span class=\"line\">        menubar = self.menuBar()    <span class=\"comment\">#创建一个菜单栏</span></span><br><span class=\"line\">        fileMenu = menubar.addMenu(<span class=\"string\">&#x27;&amp;File&#x27;</span>) <span class=\"comment\">#这里的符号&#x27;&amp;&#x27;不会在菜单栏选项中显示出来</span></span><br><span class=\"line\">        fileMenu.addAction(exitAct)</span><br><span class=\"line\"></span><br><span class=\"line\">        toolbar = self.addToolBar(<span class=\"string\">&#x27;Exit&#x27;</span>)  <span class=\"comment\">#addToolBar()创建工具栏</span></span><br><span class=\"line\">        toolbar.addAction(exitAct)         <span class=\"comment\">#工具栏添加一个选项</span></span><br><span class=\"line\"></span><br><span class=\"line\">        self.setGeometry(<span class=\"number\">300</span>, <span class=\"number\">300</span>, <span class=\"number\">350</span>, <span class=\"number\">250</span>)</span><br><span class=\"line\">        self.setWindowTitle(<span class=\"string\">&#x27;Main window&#x27;</span>)    </span><br><span class=\"line\">        self.show()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">    app = QApplication(sys.argv)</span><br><span class=\"line\">    ex = Example()</span><br><span class=\"line\">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n","categories":[{"name":"Programming languages and projects","slug":"Programming-languages-and-projects","count":11,"path":"api/categories/Programming-languages-and-projects.json"},{"name":"Python3","slug":"Programming-languages-and-projects/Python3","count":9,"path":"api/categories/Programming-languages-and-projects/Python3.json"},{"name":"PYQT5","slug":"Programming-languages-and-projects/Python3/PYQT5","count":9,"path":"api/categories/Programming-languages-and-projects/Python3/PYQT5.json"}],"tags":[{"name":"python3","slug":"python3","count":9,"path":"api/tags/python3.json"},{"name":"gui","slug":"gui","count":9,"path":"api/tags/gui.json"}]}