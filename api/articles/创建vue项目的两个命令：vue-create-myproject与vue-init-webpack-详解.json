{"title":"创建vue项目的两个命令：vue create myproject与vue init webpack 详解","slug":"创建vue项目的两个命令：vue-create-myproject与vue-init-webpack-详解","date":"2021-09-19T02:11:56.099Z","updated":"2021-09-22T03:01:21.593Z","comments":true,"path":"api/articles/创建vue项目的两个命令：vue-create-myproject与vue-init-webpack-详解.json","photos":[],"link":"","excerpt":null,"covers":null,"content":"<h1 id=\"创建vue项目的两个命令：vue-create-myproject与vue-init-webpack-详解\"><a href=\"#创建vue项目的两个命令：vue-create-myproject与vue-init-webpack-详解\" class=\"headerlink\" title=\"创建vue项目的两个命令：vue create myproject与vue init webpack 详解\"></a>创建vue项目的两个命令：vue create myproject与vue init webpack 详解</h1><h2 id=\"两个不同方法的来源\"><a href=\"#两个不同方法的来源\" class=\"headerlink\" title=\"两个不同方法的来源\"></a>两个不同方法的来源</h2><p>vue create 是vue-cli3.x（包括现在最新的vue-cli4.x）的初始化方式，目前模板是固定的，模板选项可自由配置，创建出来的是vue-cli3的项目，与cue-cli2项目结构不同，配置方法不同，具体配置方法参考官方文档网页链接。</p>\n<p>vue init 则是vue-cli2.x的初始化方式，可以使用github上面的一些模板来初始化项目，webpack是官方推荐的标准模板名。vue-cli2.x项目向3.x迁移只需要把static目录复制到public目录下，老项目的src目录覆盖3.x的src目录(如果修改了配置，可以查看文档，用cli3的方法进行配置)</p>\n<h2 id=\"vue-init-webpack-详解\"><a href=\"#vue-init-webpack-详解\" class=\"headerlink\" title=\"vue init webpack 详解\"></a>vue init webpack 详解</h2><p><a href=\"https://www.jianshu.com/p/6788ff700e5a\">简书文章</a>中对DOS窗口中各个选择题的解释：</p>\n<blockquote>\n<ul>\n<li><p>Project name (my-project): #项目名称，如果不需要就直接回车。注：此处项目名不能使用大写。</p>\n</li>\n<li><p>Project description (A Vue.js project): #项目描述，如果不需要就直接回车。</p>\n</li>\n<li><p>Author (xxx)：#项目作者，默认计算机用户名</p>\n</li>\n<li><p>vue build (Use arrow keys)</p>\n</li>\n</ul>\n<p> &gt; Runtime + Compiler:recommended for most users </p>\n<p> #译：运行+编译：被推荐为大多数用户的默认选择</p>\n<p> &gt; Runtime-only:about 6KB lighter min+gzip,but templates (or any Vue-specific HTML) are ONLY allowed in .vue files-render functions are required elsewhere </p>\n<p> #译：只运行大约6KB比较轻量的压缩文件，但只允许模板（或任何VUE特定HTML，VUE文件需要在其他地方呈现函数。翻译不精准，意思大概是选择该构建方式对文件大小有要求</p>\n<ul>\n<li><p>install vue-router? #安装vue的路由插件，需要就选y，否则就n [建议Y]</p>\n</li>\n<li><p>Use ESLint to lint your code? #是否使用ESLint检测你的代码？[ESLint 是一个语法规则和代码风格的检查工具，可以用来保证写出语法正确、风格统一的代码。建议选择 ‘N’ 因为选择 ‘Y’ 在做调试项目时,控制台会有很多 黄色警告 提示格式不规范,但其实并不影响项目]</p>\n</li>\n<li><p>Setup unit tests? #是否安装单元测试(国内其实为了追求开发速度这一块很少安装，但后续添加麻烦)</p>\n</li>\n<li><p>Setup e2e tests with Nightwatch(Y/n)? #是否安装E2E测试框架NightWatch（E2E，也就是End To End，就是所谓的“用户真实场景” [建议N]</p>\n</li>\n<li><p>Should we run ‘npm install’ for you after the project has been created?        #项目创建后是否要为你运行“npm install”?这里选择包管理工具 [建议yes,use npm]</p>\n</li>\n</ul>\n<p> yes,use npm        #使用npm</p>\n<p> yes,use yarn    #使用yarn</p>\n<p> no,I will handle that myself    #自己操作</p>\n</blockquote>\n<p><strong>Run time complier和Run time only的区别</strong></p>\n<p>二者区别主要在main.js文件上：<br><code>Run time complier</code>中注册了App在使用，而在<code>Run time only中</code>，直接是一个render函数</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./App&#x27;</span></span><br><span class=\"line\">Vue.config.productionTip = <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> Vue(&#123;</span><br><span class=\"line\">    <span class=\"attr\">el</span>:<span class=\"string\">&#x27;#app&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">components</span>:&#123; App &#125;,</span><br><span class=\"line\">    <span class=\"attr\">template</span>:<span class=\"string\">&#x27;&lt;App/&gt;&#x27;</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p><code>Run time only</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./App&#x27;</span></span><br><span class=\"line\">Vue.config.productionTip = <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> Vue(&#123;</span><br><span class=\"line\">    <span class=\"attr\">el</span>:<span class=\"string\">&#x27;#app&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">render</span>: <span class=\"function\"><span class=\"params\">h</span> =&gt;</span> h(App)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://www.jianshu.com/p/d3823a5a0592\">二者区别的原因在于运行原理</a></p>\n<blockquote>\n<p>在run time comliper中，将template传进给Vue时，会将<strong>template</strong>保存在Vue实例中的potions中，然后<strong>解析成ast 结构</strong>（ast是abstrct syntax trees英文的简称，译为抽象语法树）进而，<strong>将ast 编译成render函数</strong>；render函数又会将对应的tempalet<strong>转换成虚拟的dom节点元素</strong>，这些虚拟的节点元素就会构成一课虚拟dom树，最后再转化成真实的dom元素，也是就<strong>UI</strong>。<br> 这就是run time comliper 的原理，总结起来就是<strong>：template –&gt; ast –&gt; render –&gt;virtual dom –&gt; UI。</strong></p>\n<p>run time only 中没有template 而只有函数，所以它的原理就是比 run time compiler 少了template –&gt; ast 的步骤。直接从render函数开始，转换成虚拟的dom最后变成真实的UI。</p>\n</blockquote>\n<h3 id=\"全部选择y的情况\"><a href=\"#全部选择y的情况\" class=\"headerlink\" title=\"全部选择y的情况\"></a>全部选择y的情况</h3><p>文件目录结构：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">project</span><br><span class=\"line\">|\tREADME.md</span><br><span class=\"line\">|\t.editorconfig</span><br><span class=\"line\">|\t.eslintignore</span><br><span class=\"line\">|\t.eslintrc.js</span><br><span class=\"line\">|\t.gitignore</span><br><span class=\"line\">|\t.postcssrc.js</span><br><span class=\"line\">|\t.babelrc</span><br><span class=\"line\">|\tpackage.json</span><br><span class=\"line\">|\tpackage-lock.json</span><br><span class=\"line\">|\tindex.html</span><br><span class=\"line\">└---node_modules</span><br><span class=\"line\">└---config</span><br><span class=\"line\">|\t  |---dev.env.js</span><br><span class=\"line\">|\t  |---index.js</span><br><span class=\"line\">|\t  |---prod.env.js</span><br><span class=\"line\">└---build</span><br><span class=\"line\">|\t  |---build.js</span><br><span class=\"line\">|\t  |---check-versions.js</span><br><span class=\"line\">|\t  |---logo.png</span><br><span class=\"line\">|\t  |---utils.js</span><br><span class=\"line\">|\t  |---vue-loader.conf.js</span><br><span class=\"line\">|\t  |---webpack.base.conf.js</span><br><span class=\"line\">|\t  |---webpack.dev.conf.js</span><br><span class=\"line\">|\t  |---webpack.prod.conf.js</span><br><span class=\"line\">└---static</span><br><span class=\"line\">|\t  |---.gitkeep</span><br><span class=\"line\">└---src</span><br><span class=\"line\">\t  |---App.vue</span><br><span class=\"line\">\t  |---main.js</span><br><span class=\"line\">\t  └---router</span><br><span class=\"line\">\t  |\t\t|---index.js</span><br><span class=\"line\">\t  └---components</span><br><span class=\"line\">\t  |\t\t|---HelloWorld.vue</span><br><span class=\"line\">\t  └---assets</span><br><span class=\"line\">\t  \t\t|---logo.png</span><br></pre></td></tr></table></figure>\n\n<p>简易说明一下其中几个文件和文件夹的说明：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node_modules：安装的依赖代码库</span><br><span class=\"line\">.babelrc：babel相关配置（babel的作用在于将es6语法转换成浏览器支持的es5语法）</span><br><span class=\"line\">.editorconfig：编辑器的配置，可以在此修改代码、缩进等</span><br><span class=\"line\">.eslintrc.js：eslint的配置文件</span><br><span class=\"line\">.gitignore：git忽略里面设定的这些文件的提交</span><br><span class=\"line\">src：项目源码</span><br><span class=\"line\">static：存放静态资源</span><br><span class=\"line\">index.html：入口html文件</span><br><span class=\"line\">package.json：项目的配置文件，用于描述该项目，包括初始化时的设置、环境、依赖包、版本等信息</span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://www.cnblogs.com/kunmomo/p/14987319.html\">.eslintignore文件</a>：</p>\n<blockquote>\n<p>当 ESLint 运行时，在确定哪些文件要检测之前，它会在当前工作目录中查找一个 <code>.eslintignore</code> 文件。如果发现了这个文件，当遍历目录时，将会应用这些偏好设置。一次只有一个 <code>.eslintignore</code> 文件会被使用，所以，不是当前工作目录下的 <code>.eslintignore</code> 文件将不会被用到。</p>\n</blockquote>\n<p><a href=\"https://www.cnblogs.com/QFKing/p/11869347.html\">static文件夹中的.gitkeep文件</a>：</p>\n<blockquote>\n<p>git无法追踪一个空<em>文件夹</em>,当用户需要追踪(track)一个空<em>文件夹</em>的时候,按照惯例,大家会把一个称为.<em>gitkeep</em>的<em>文件</em>放在这些<em>文件夹</em>里</p>\n</blockquote>\n<p><strong><a href=\"https://blog.csdn.net/luwenze/article/details/89430527\">build文件夹</a></strong><br>build文件夹中的文件对 <strong>webpack 开发</strong>和<strong>打包</strong>进行相关设置，包括入口文件、输出文件、使用的模块等。<br><code>build.js</code>构建环境下的配置:loading动画、删除创建目标文件夹、webpack编译、输出信息：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./check-versions&#x27;</span>)()  <span class=\"comment\">//请求同级目录下的check-versions.js文件，进行node和npm的版本检查</span></span><br><span class=\"line\">process.env.NODE_ENV = <span class=\"string\">&#x27;production&#x27;</span>\t<span class=\"comment\">//设置环境变量为生产环境</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> ora = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;ora&#x27;</span>)\t<span class=\"comment\">//主要用来实现node.js命令行环境的loading效果,和显示各种状态的图标等</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> rm = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;rimraf&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> chalk = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;chalk&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;webpack&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> config = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../config&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> webpackConfig = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./webpack.prod.conf&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> spinner = ora(<span class=\"string\">&#x27;building for production...&#x27;</span>)</span><br><span class=\"line\">spinner.start()\t<span class=\"comment\">//启动Loading动画</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//删除dist/static文件夹</span></span><br><span class=\"line\">rm(path.join(config.build.assetsRoot, config.build.assetsSubDirectory), <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err</span><br><span class=\"line\">  webpack(webpackConfig, <span class=\"function\">(<span class=\"params\">err, stats</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    spinner.stop()\t<span class=\"comment\">//结束Loading动画</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err</span><br><span class=\"line\">    process.stdout.write(stats.toString(&#123;\t\t<span class=\"comment\">//标准输出流，类似于console.log</span></span><br><span class=\"line\">      <span class=\"attr\">colors</span>: <span class=\"literal\">true</span>,\t\t<span class=\"comment\">//增加控制台颜色开关\t</span></span><br><span class=\"line\">      <span class=\"attr\">modules</span>: <span class=\"literal\">false</span>,\t<span class=\"comment\">//是否增加内置模块信息</span></span><br><span class=\"line\">      <span class=\"attr\">children</span>: <span class=\"literal\">false</span>, <span class=\"comment\">// If you are using ts-loader, setting this to true will make TypeScript errors show up during build.</span></span><br><span class=\"line\">      <span class=\"attr\">chunks</span>: <span class=\"literal\">false</span>,\t<span class=\"comment\">//是否允许较少的输出</span></span><br><span class=\"line\">      <span class=\"attr\">chunkModules</span>: <span class=\"literal\">false</span><span class=\"comment\">//是否在编译过程中持续打印</span></span><br><span class=\"line\">    &#125;) + <span class=\"string\">&#x27;\\n\\n&#x27;</span>)</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"comment\">//编译出错的信息</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (stats.hasErrors()) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(chalk.red(<span class=\"string\">&#x27;  Build failed with errors.\\n&#x27;</span>))</span><br><span class=\"line\">      process.exit(<span class=\"number\">1</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t<span class=\"comment\">//编译成功的信息</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(chalk.cyan(<span class=\"string\">&#x27;  Build complete.\\n&#x27;</span>))</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(chalk.yellow(</span><br><span class=\"line\">      <span class=\"string\">&#x27;  Tip: built files are meant to be served over an HTTP server.\\n&#x27;</span> +</span><br><span class=\"line\">      <span class=\"string\">&#x27;  Opening index.html over file:// won\\&#x27;t work.\\n&#x27;</span></span><br><span class=\"line\">    ))</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p><code>check-versions.js</code>文件负责node和npm的版本检查</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> chalk = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;chalk&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> semver = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;semver&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> packageConfig = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../package.json&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> shell = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;shelljs&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">脚本跨域通过child_process模块新建子进程，从而执行unix系统命令</span></span><br><span class=\"line\"><span class=\"comment\">将cmd参数传递的值转换成前后没有空格的字符串，即版本号</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">exec</span> (<span class=\"params\">cmd</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;child_process&#x27;</span>).execSync(cmd).toString().trim()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//声明常量数组，数组内容为有关node相关信息的对象</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> versionRequirements = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">name</span>: <span class=\"string\">&#x27;node&#x27;</span>,<span class=\"comment\">//对象名称</span></span><br><span class=\"line\">    <span class=\"attr\">currentVersion</span>: semver.clean(process.version),</span><br><span class=\"line\">    <span class=\"comment\">//使用semver插件，将版本信息转换成规定格式</span></span><br><span class=\"line\">    <span class=\"attr\">versionRequirement</span>: packageConfig.engines.node</span><br><span class=\"line\">    <span class=\"comment\">//规定package.json中engines选项的node版本信息</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (shell.which(<span class=\"string\">&#x27;npm&#x27;</span>)) &#123;\t<span class=\"comment\">//linux指令</span></span><br><span class=\"line\">  versionRequirements.push(&#123;</span><br><span class=\"line\">    <span class=\"attr\">name</span>: <span class=\"string\">&#x27;npm&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">currentVersion</span>: exec(<span class=\"string\">&#x27;npm --version&#x27;</span>),</span><br><span class=\"line\">    <span class=\"attr\">versionRequirement</span>: packageConfig.engines.npm</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> warnings = []</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; versionRequirements.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> mod = versionRequirements[i]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!semver.satisfies(mod.currentVersion, mod.versionRequirement)) &#123;</span><br><span class=\"line\">      warnings.push(mod.name + <span class=\"string\">&#x27;: &#x27;</span> +</span><br><span class=\"line\">        chalk.red(mod.currentVersion) + <span class=\"string\">&#x27; should be &#x27;</span> +</span><br><span class=\"line\">        chalk.green(mod.versionRequirement)</span><br><span class=\"line\">        <span class=\"comment\">//若版本号用红色标识，则要求改用绿色标识</span></span><br><span class=\"line\">      )</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"comment\">//为真则打印提示用户升级新版本</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (warnings.length) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(chalk.yellow(<span class=\"string\">&#x27;To use this template, you must update following to modules:&#x27;</span>))</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; warnings.length; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> warning = warnings[i]</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;  &#x27;</span> + warning)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log()</span><br><span class=\"line\">    process.exit(<span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>util.js文件配置静态资源路径，生成cssLoaders用于加载.vue文件中的样式，生成styleLoaders用于加载不在.vue文件中的单独存在的样式文件（被引入的css文件）</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> config = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../config&#x27;</span>)\t<span class=\"comment\">//！引入的是config文件夹下的index.js文件</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;extract-text-webpack-plugin&#x27;</span>)<span class=\"comment\">//该插件抽离css样式</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> packageConfig = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../package.json&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.assetsPath = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">_path</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> assetsSubDirectory = process.env.NODE_ENV === <span class=\"string\">&#x27;production&#x27;</span></span><br><span class=\"line\">    ? config.build.assetsSubDirectory</span><br><span class=\"line\">    : config.dev.assetsSubDirectory</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> path.posix.join(assetsSubDirectory, _path)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.cssLoaders = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">options</span>) </span>&#123;</span><br><span class=\"line\">  options = options || &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> cssLoader = &#123;</span><br><span class=\"line\">    <span class=\"attr\">loader</span>: <span class=\"string\">&#x27;css-loader&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">sourceMap</span>: options.sourceMap</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> postcssLoader = &#123;</span><br><span class=\"line\">    <span class=\"attr\">loader</span>: <span class=\"string\">&#x27;postcss-loader&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">sourceMap</span>: options.sourceMap</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// generate loader string to be used with extract text plugin</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">generateLoaders</span> (<span class=\"params\">loader, loaderOptions</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> loaders = options.usePostCSS ? [cssLoader, postcssLoader] : [cssLoader]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (loader) &#123;</span><br><span class=\"line\">      loaders.push(&#123;</span><br><span class=\"line\">        <span class=\"attr\">loader</span>: loader + <span class=\"string\">&#x27;-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: <span class=\"built_in\">Object</span>.assign(&#123;&#125;, loaderOptions, &#123;</span><br><span class=\"line\">          <span class=\"attr\">sourceMap</span>: options.sourceMap</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Extract CSS when that option is specified</span></span><br><span class=\"line\">    <span class=\"comment\">// (which is the case during production build)</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (options.extract) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">        <span class=\"attr\">use</span>: loaders,</span><br><span class=\"line\">        <span class=\"attr\">fallback</span>: <span class=\"string\">&#x27;vue-style-loader&#x27;</span></span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> [<span class=\"string\">&#x27;vue-style-loader&#x27;</span>].concat(loaders)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// https://vue-loader.vuejs.org/en/configurations/extract-css.html</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">css</span>: generateLoaders(),</span><br><span class=\"line\">    <span class=\"attr\">postcss</span>: generateLoaders(),</span><br><span class=\"line\">    <span class=\"attr\">less</span>: generateLoaders(<span class=\"string\">&#x27;less&#x27;</span>),</span><br><span class=\"line\">    <span class=\"attr\">sass</span>: generateLoaders(<span class=\"string\">&#x27;sass&#x27;</span>, &#123; <span class=\"attr\">indentedSyntax</span>: <span class=\"literal\">true</span> &#125;),</span><br><span class=\"line\">    <span class=\"attr\">scss</span>: generateLoaders(<span class=\"string\">&#x27;sass&#x27;</span>),</span><br><span class=\"line\">    <span class=\"attr\">stylus</span>: generateLoaders(<span class=\"string\">&#x27;stylus&#x27;</span>),</span><br><span class=\"line\">    <span class=\"attr\">styl</span>: generateLoaders(<span class=\"string\">&#x27;stylus&#x27;</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Generate loaders for standalone style files (outside of .vue)</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.styleLoaders = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">options</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> output = []</span><br><span class=\"line\">  <span class=\"keyword\">const</span> loaders = <span class=\"built_in\">exports</span>.cssLoaders(options)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> extension <span class=\"keyword\">in</span> loaders) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> loader = loaders[extension]</span><br><span class=\"line\">    output.push(&#123;</span><br><span class=\"line\">      <span class=\"attr\">test</span>: <span class=\"keyword\">new</span> <span class=\"built_in\">RegExp</span>(<span class=\"string\">&#x27;\\\\.&#x27;</span> + extension + <span class=\"string\">&#x27;$&#x27;</span>),</span><br><span class=\"line\">      <span class=\"attr\">use</span>: loader</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> output</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.createNotifierCallback = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> notifier = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;node-notifier&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">severity, errors</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (severity !== <span class=\"string\">&#x27;error&#x27;</span>) <span class=\"keyword\">return</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> error = errors[<span class=\"number\">0</span>]</span><br><span class=\"line\">    <span class=\"keyword\">const</span> filename = error.file &amp;&amp; error.file.split(<span class=\"string\">&#x27;!&#x27;</span>).pop()</span><br><span class=\"line\"></span><br><span class=\"line\">    notifier.notify(&#123;</span><br><span class=\"line\">      <span class=\"attr\">title</span>: packageConfig.name,</span><br><span class=\"line\">      <span class=\"attr\">message</span>: severity + <span class=\"string\">&#x27;: &#x27;</span> + error.name,</span><br><span class=\"line\">      <span class=\"attr\">subtitle</span>: filename || <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">icon</span>: path.join(__dirname, <span class=\"string\">&#x27;logo.png&#x27;</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>vue-loader.config.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> utils = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./utils&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> config = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../config&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> isProduction = process.env.NODE_ENV === <span class=\"string\">&#x27;production&#x27;</span><span class=\"comment\">//判断是否为生产环境</span></span><br><span class=\"line\"><span class=\"comment\">//根据环境来获取相应的productionSourceMap或者cssSourceMap</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> sourceMapEnabled = isProduction</span><br><span class=\"line\">  ? config.build.productionSourceMap</span><br><span class=\"line\">  : config.dev.cssSourceMap</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">loaders</span>: utils.cssLoaders(&#123;</span><br><span class=\"line\">    <span class=\"attr\">sourceMap</span>: sourceMapEnabled,<span class=\"comment\">//是否开始sourceMap用来调试</span></span><br><span class=\"line\">    <span class=\"attr\">extract</span>: isProduction\t\t<span class=\"comment\">//是否单独提取抽离CSS</span></span><br><span class=\"line\">  &#125;),</span><br><span class=\"line\">  <span class=\"attr\">cssSourceMap</span>: sourceMapEnabled,<span class=\"comment\">//纪录压缩的代码，用来找到源码位置</span></span><br><span class=\"line\">  <span class=\"attr\">cacheBusting</span>: config.dev.cacheBusting,<span class=\"comment\">//是否缓存破坏</span></span><br><span class=\"line\">  <span class=\"comment\">//在模块编译的过程中，将某些属性转换并调用</span></span><br><span class=\"line\">  <span class=\"attr\">transformToRequire</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">video</span>: [<span class=\"string\">&#x27;src&#x27;</span>, <span class=\"string\">&#x27;poster&#x27;</span>],</span><br><span class=\"line\">    <span class=\"attr\">source</span>: <span class=\"string\">&#x27;src&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">img</span>: <span class=\"string\">&#x27;src&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">image</span>: <span class=\"string\">&#x27;xlink:href&#x27;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"webpack-base-conf-js文件\"><a href=\"#webpack-base-conf-js文件\" class=\"headerlink\" title=\"webpack.base.conf.js文件\"></a>webpack.base.conf.js文件</h4><p>基本的webpack配置<br>   配置webpack编译入口<br>   配置webpack输出路径和命名规则<br>   配置模块resolve规则<br>   配置不同类型模块的处理规则</p>\n<h4 id=\"webpack-dev-conf-js文件\"><a href=\"#webpack-dev-conf-js文件\" class=\"headerlink\" title=\"webpack.dev.conf.js文件\"></a>webpack.dev.conf.js文件</h4><p>开发环境配置<br>   在base.conf基础进一步完善<br>   将hot-reload相关的代码添加到entry chunks<br>   使用styleLoaders<br>   配置Source Maps<br>   配置webpack插件</p>\n<h4 id=\"webpack-prod-conf-js文件\"><a href=\"#webpack-prod-conf-js文件\" class=\"headerlink\" title=\"webpack.prod.conf.js文件\"></a>webpack.prod.conf.js文件</h4><p>生产环境配置<br>  在base.conf基础进一步完善<br>  合并基础webpack配置<br>  使用styleLoaders<br>  配置webpack输出<br>  配置webpack插件<br>  gzip模式下的webpack插件配置<br>  webpack-bundle分析</p>\n<p><strong>config文件夹</strong></p>\n<p>config文件夹下有三个文件``dev.env.js<code>、</code>index.js<code>、</code>prod.env.js`。</p>\n<p>prod.env.js：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">NODE_ENV</span>: <span class=\"string\">&#x27;&quot;production&quot;&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//内容非常简单，仅仅是导出了一个对象，里面写明了执行环境是“production（生产环境）”；</span></span><br><span class=\"line\"><span class=\"comment\">//注意，严格模式是es5的保留字，但不推荐在es6语法下使用！</span></span><br></pre></td></tr></table></figure>\n\n<p>dev.env.js：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> merge = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;webpack-merge&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> prodEnv = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;./prod.env&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = merge(prodEnv, &#123;</span><br><span class=\"line\">  <span class=\"attr\">NODE_ENV</span>: <span class=\"string\">&#x27;&quot;development&quot;&#x27;</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">//在“dev.env.js”中，先引入了webpack-merge这个模块。这个模块的作用是来合并两个配置文件对象并生成一个新的配置文件，有点儿类似于es6的object.assign();</span></span><br></pre></td></tr></table></figure>\n\n<p>index.js：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&#x27;use strict&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// Template version: 1.3.1</span></span><br><span class=\"line\"><span class=\"comment\">// see http://vuejs-templates.github.io/webpack for documentation.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">dev</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Paths</span></span><br><span class=\"line\">    <span class=\"attr\">assetsSubDirectory</span>: <span class=\"string\">&#x27;static&#x27;</span>, \t<span class=\"comment\">//静态资源文件夹，默认“static”</span></span><br><span class=\"line\">    <span class=\"attr\">assetsPublicPath</span>: <span class=\"string\">&#x27;/&#x27;</span>,\t\t\t<span class=\"comment\">//发布路径</span></span><br><span class=\"line\">    <span class=\"attr\">proxyTable</span>: &#123;&#125;,\t\t\t\t\t<span class=\"comment\">//设置代理API，常用于解决跨域问题</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Various Dev Server settings</span></span><br><span class=\"line\">    <span class=\"attr\">host</span>: <span class=\"string\">&#x27;localhost&#x27;</span>, <span class=\"comment\">// can be overwritten by process.env.HOST</span></span><br><span class=\"line\">    <span class=\"attr\">port</span>: <span class=\"number\">8080</span>, <span class=\"comment\">// can be overwritten by process.env.PORT, if port is in use, a free one will be determined</span></span><br><span class=\"line\">    <span class=\"attr\">autoOpenBrowser</span>: <span class=\"literal\">false</span>,\t\t\t<span class=\"comment\">//是否自动打开浏览器</span></span><br><span class=\"line\">    <span class=\"attr\">errorOverlay</span>: <span class=\"literal\">true</span>,\t\t\t\t<span class=\"comment\">//查询错误</span></span><br><span class=\"line\">    <span class=\"attr\">notifyOnErrors</span>: <span class=\"literal\">true</span>,\t\t\t<span class=\"comment\">//通知错误</span></span><br><span class=\"line\">    </span><br><span class=\"line\">      <span class=\"attr\">poll</span>: <span class=\"literal\">false</span>, <span class=\"comment\">// https://webpack.js.org/configuration/dev-server/#devserver-watchoptions-</span></span><br><span class=\"line\">      <span class=\"comment\">//poll是跟devserver相关的一个配置，webpack为我们提供的devserver是可以监控文件改动的，但在有些情况下却不能工作，我们可以设置一个轮询（poll）来解决</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Use Eslint Loader?</span></span><br><span class=\"line\">    <span class=\"comment\">// If true, your code will be linted during bundling and</span></span><br><span class=\"line\">    <span class=\"comment\">// linting errors and warnings will be shown in the console.</span></span><br><span class=\"line\">    <span class=\"attr\">useEslint</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"comment\">// If true, eslint errors and warnings will also be shown in the error overlay</span></span><br><span class=\"line\">    <span class=\"comment\">// in the browser.</span></span><br><span class=\"line\">    <span class=\"attr\">showEslintErrorsInOverlay</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">\t<span class=\"comment\">//上面这两个是跟eslint相关的属性</span></span><br><span class=\"line\">      </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Source Maps</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attr\">devtool</span>: <span class=\"string\">&#x27;cheap-module-eval-source-map&#x27;</span>,\t</span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    webpack提供的用来方便调试的配置，它有四种模式，</span></span><br><span class=\"line\"><span class=\"comment\">    详见https://webpack.js.org/configuration/devtool/#development</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// If you have problems debugging vue-files in devtools,</span></span><br><span class=\"line\">    <span class=\"comment\">// set this to false - it *may* help</span></span><br><span class=\"line\">    <span class=\"comment\">// https://vue-loader.vuejs.org/en/options.html#cachebusting</span></span><br><span class=\"line\">    <span class=\"attr\">cacheBusting</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"comment\">//一个配合devtool的配置，当给文件名插入新的hash导致清楚缓存时是否生成souce maps，默认在开发环境下为true</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attr\">cssSourceMap</span>: <span class=\"literal\">true</span>   <span class=\"comment\">//是否开启cssSourceMap</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">build</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Template for index.html</span></span><br><span class=\"line\">    <span class=\"attr\">index</span>: path.resolve(__dirname, <span class=\"string\">&#x27;../dist/index.html&#x27;</span>),</span><br><span class=\"line\">    <span class=\"comment\">//编译后index.html的路径</span></span><br><span class=\"line\">    <span class=\"comment\">//Node.js 中,__dirname总是指向被执行 js 文件的绝对路径,比如你在/d1/d2/myscript.js文件中写了__dirname, 它的值就是/d1/d2</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Paths</span></span><br><span class=\"line\">    <span class=\"attr\">assetsRoot</span>: path.resolve(__dirname, <span class=\"string\">&#x27;../dist&#x27;</span>),<span class=\"comment\">//打包后的文件根路径</span></span><br><span class=\"line\">    <span class=\"attr\">assetsSubDirectory</span>: <span class=\"string\">&#x27;static&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">assetsPublicPath</span>: <span class=\"string\">&#x27;/&#x27;</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Source Maps</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attr\">productionSourceMap</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"comment\">// https://webpack.js.org/configuration/devtool/#production</span></span><br><span class=\"line\">    <span class=\"attr\">devtool</span>: <span class=\"string\">&#x27;#source-map&#x27;</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Gzip off by default as many popular static hosts such as</span></span><br><span class=\"line\">    <span class=\"comment\">// Surge or Netlify already gzip all static assets for you.</span></span><br><span class=\"line\">    <span class=\"comment\">// Before setting to `true`, make sure to:</span></span><br><span class=\"line\">    <span class=\"comment\">// npm install --save-dev compression-webpack-plugin</span></span><br><span class=\"line\">    <span class=\"attr\">productionGzip</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"attr\">productionGzipExtensions</span>: [<span class=\"string\">&#x27;js&#x27;</span>, <span class=\"string\">&#x27;css&#x27;</span>],</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Run the build command with an extra argument to</span></span><br><span class=\"line\">    <span class=\"comment\">// View the bundle analyzer report after build finishes:</span></span><br><span class=\"line\">    <span class=\"comment\">// `npm run build --report`</span></span><br><span class=\"line\">    <span class=\"comment\">// Set to `true` or `false` to always turn it on or off</span></span><br><span class=\"line\">    <span class=\"attr\">bundleAnalyzerReport</span>: process.env.npm_config_report</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<p>package.json中的情况：</p>\n<p>参照<a href=\"https://blog.csdn.net/u011486491/article/details/101800764\">这一篇CSDN博客</a>为各个属性名添加了注释</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;helloworld&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;version&quot;</span>: <span class=\"string\">&quot;1.0.0&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;description&quot;</span>: <span class=\"string\">&quot;A Vue.js project&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;author&quot;</span>: <span class=\"string\">&quot;your name&lt;your email&gt;&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;private&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;dev&quot;</span>: <span class=\"string\">&quot;webpack-dev-server --inline --progress --config build/webpack.dev.conf.js&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;start&quot;</span>: <span class=\"string\">&quot;npm run dev&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;lint&quot;</span>: <span class=\"string\">&quot;eslint --ext .js,.vue src&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;build&quot;</span>: <span class=\"string\">&quot;node build/build.js&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;dependencies&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;vue&quot;</span>: <span class=\"string\">&quot;^2.5.2&quot;</span>,  \t\t<span class=\"comment\">//该属性介绍了vue的版本</span></span><br><span class=\"line\">    <span class=\"string\">&quot;vue-router&quot;</span>: <span class=\"string\">&quot;^3.0.1&quot;</span>\t<span class=\"comment\">//该属性介绍了vue-router的版本</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;devDependencies&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;autoprefixer&quot;</span>: <span class=\"string\">&quot;^7.1.2&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;babel-core&quot;</span>: <span class=\"string\">&quot;^6.22.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;babel-eslint&quot;</span>: <span class=\"string\">&quot;^8.2.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;babel-helper-vue-jsx-merge-props&quot;</span>: <span class=\"string\">&quot;^2.0.3&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;babel-loader&quot;</span>: <span class=\"string\">&quot;^7.1.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;babel-plugin-syntax-jsx&quot;</span>: <span class=\"string\">&quot;^6.18.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;babel-plugin-transform-runtime&quot;</span>: <span class=\"string\">&quot;^6.22.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;babel-plugin-transform-vue-jsx&quot;</span>: <span class=\"string\">&quot;^3.5.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;babel-preset-env&quot;</span>: <span class=\"string\">&quot;^1.3.2&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;babel-preset-stage-2&quot;</span>: <span class=\"string\">&quot;^6.22.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;chalk&quot;</span>: <span class=\"string\">&quot;^2.0.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;copy-webpack-plugin&quot;</span>: <span class=\"string\">&quot;^4.0.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;css-loader&quot;</span>: <span class=\"string\">&quot;^0.28.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;eslint&quot;</span>: <span class=\"string\">&quot;^4.15.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;eslint-config-airbnb-base&quot;</span>: <span class=\"string\">&quot;^11.3.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;eslint-friendly-formatter&quot;</span>: <span class=\"string\">&quot;^3.0.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;eslint-import-resolver-webpack&quot;</span>: <span class=\"string\">&quot;^0.8.3&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;eslint-loader&quot;</span>: <span class=\"string\">&quot;^1.7.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;eslint-plugin-import&quot;</span>: <span class=\"string\">&quot;^2.7.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;eslint-plugin-vue&quot;</span>: <span class=\"string\">&quot;^4.0.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;extract-text-webpack-plugin&quot;</span>: <span class=\"string\">&quot;^3.0.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;file-loader&quot;</span>: <span class=\"string\">&quot;^1.1.4&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;friendly-errors-webpack-plugin&quot;</span>: <span class=\"string\">&quot;^1.6.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;html-webpack-plugin&quot;</span>: <span class=\"string\">&quot;^2.30.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;node-notifier&quot;</span>: <span class=\"string\">&quot;^5.1.2&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;optimize-css-assets-webpack-plugin&quot;</span>: <span class=\"string\">&quot;^3.2.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;ora&quot;</span>: <span class=\"string\">&quot;^1.2.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;portfinder&quot;</span>: <span class=\"string\">&quot;^1.0.13&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;postcss-import&quot;</span>: <span class=\"string\">&quot;^11.0.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;postcss-loader&quot;</span>: <span class=\"string\">&quot;^2.0.8&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;postcss-url&quot;</span>: <span class=\"string\">&quot;^7.2.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;rimraf&quot;</span>: <span class=\"string\">&quot;^2.6.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;semver&quot;</span>: <span class=\"string\">&quot;^5.3.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;shelljs&quot;</span>: <span class=\"string\">&quot;^0.7.6&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;uglifyjs-webpack-plugin&quot;</span>: <span class=\"string\">&quot;^1.1.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;url-loader&quot;</span>: <span class=\"string\">&quot;^0.5.8&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;vue-loader&quot;</span>: <span class=\"string\">&quot;^13.3.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;vue-style-loader&quot;</span>: <span class=\"string\">&quot;^3.0.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;vue-template-compiler&quot;</span>: <span class=\"string\">&quot;^2.5.2&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;webpack&quot;</span>: <span class=\"string\">&quot;^3.6.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;webpack-bundle-analyzer&quot;</span>: <span class=\"string\">&quot;^2.9.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;webpack-dev-server&quot;</span>: <span class=\"string\">&quot;^2.9.1&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;webpack-merge&quot;</span>: <span class=\"string\">&quot;^4.1.0&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;engines&quot;</span>: &#123;\t\t\t<span class=\"comment\">//引擎相关的内容</span></span><br><span class=\"line\">    <span class=\"string\">&quot;node&quot;</span>: <span class=\"string\">&quot;&gt;= 6.0.0&quot;</span>,\t<span class=\"comment\">//node版本要求</span></span><br><span class=\"line\">    <span class=\"string\">&quot;npm&quot;</span>: <span class=\"string\">&quot;&gt;= 3.0.0&quot;</span>\t<span class=\"comment\">//npm版本要求</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;browserslist&quot;</span>: [\t\t<span class=\"comment\">//配置浏览器的信息查询范围，这些信息将给Autoprefixer babel-env-preset eslint-plugin-compat这些组件来使用</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&gt; 1%&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;last 2 versions&quot;</span>, <span class=\"comment\">//每种浏览器的最近两个版本</span></span><br><span class=\"line\">    <span class=\"string\">&quot;not ie &lt;= 8&quot;</span>\t   <span class=\"comment\">//IE8及之前的旧版本不查询</span></span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这里面的很多字段我们之前已经提到过，下面介绍几个重要的名词。</p>\n<h3 id=\"dependencies和devDependencies\"><a href=\"#dependencies和devDependencies\" class=\"headerlink\" title=\"dependencies和devDependencies\"></a>dependencies和devDependencies</h3><p>使用<code>npm install</code>安装模块，有以下四个常用命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install moduleName <span class=\"comment\"># 安装模块到项目目录下</span></span><br><span class=\"line\">npm install -g moduleName <span class=\"comment\"># -g 的意思是将模块安装到全局，具体安装到磁盘哪个位置，要看 npm config prefix 的位置。</span></span><br><span class=\"line\">npm install -save moduleName <span class=\"comment\"># -save 的意思是将模块安装到项目目录下，并在package文件的dependencies节点写入依赖。</span></span><br><span class=\"line\">npm install -save-dev moduleName <span class=\"comment\"># -save-dev 的意思是将模块安装到项目目录下，并在package文件的devDependencies节点写入依赖。</span></span><br></pre></td></tr></table></figure>\n\n<p>简单的来说，安装在dependencies中的库是在生产环境中使用的，而安装在devDependencies中的库是在开发环境中使用的（记住develop有发展的意思）。</p>\n<blockquote>\n<p>例如：<code>webpack</code>，<code>gulp</code>等打包工具，这些都是我们开发阶段使用的，代码提交线上时，不需要这些工具，所以我们将它放入<code>devDependencies</code>即可，但是像<code>jquery</code>这类插件库，是我们生产环境所使用的，所以如要放入<code>dependencies</code>，如果未将<code>jquery</code>安装到<code>dependencies</code>，那么项目就可能报错，无法运行，所以类似这种项目必须依赖的插件库，我们则必须打入<code>dependencies</code>中，这下子都明白了吧。<br>链接：<a href=\"https://www.jianshu.com/p/afb171cac890\">https://www.jianshu.com/p/afb171cac890</a></p>\n</blockquote>\n<p>我们可以在上面的package.json文件中看到，devDependencies中有一个模块autoprefixer，<a href=\"https://www.jianshu.com/p/cc57bca79a8b\">简书文章</a>中对此解释：</p>\n<blockquote>\n<p>Autoprefixer是一个后处理程序，不象Sass以及Stylus之类的预处理器。它适用于普通的CSS，可以实现css3代码自动补全。也可以轻松跟Sass，LESS及Stylus集成，在CSS编译前或编译后运行。</p>\n<p>Autoprefixer 同样会清理过期的前缀</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#清理前的CSS样式</span><br><span class=\"line\">a &#123;</span><br><span class=\"line\">    -webkit-border-radius : 5px;</span><br><span class=\"line\">    border-radius : 5px</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;#清理后的CSS样式</span><br><span class=\"line\">a &#123;</span><br><span class=\"line\"> border-radius : 5px</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">   </span><br></pre></td></tr></table></figure>\n</blockquote>\n<h3 id=\"private属性\"><a href=\"#private属性\" class=\"headerlink\" title=\"private属性\"></a>private属性</h3><blockquote>\n<p>If you set <code>&quot;private&quot;: true</code> in your package.json, then npm will refuse to publish it.</p>\n<p>This is a way to prevent accidental publication of private repositories. If you would like to ensure that a given package is only ever published to a specific registry (for example, an internal registry), then use the <code>publishConfig</code> dictionary described below to override the <code>registry</code> config param at publish-time.</p>\n</blockquote>\n<p>在项目的package.json文件中，直接将该属性设置为true即可。</p>\n<h3 id=\"package-lock-json文件\"><a href=\"#package-lock-json文件\" class=\"headerlink\" title=\"package-lock.json文件\"></a><a href=\"https://www.cnblogs.com/kugeliu/p/9153775.html\">package-lock.json文件</a></h3><blockquote>\n<ol>\n<li><p>安装之后锁定包的版本，手动更改package.json文件安装将不会更新包，想要更新只能使用 npm install <a href=\"mailto:&#x78;&#120;&#x78;&#x40;&#49;&#x2e;&#x30;&#46;&#48;\">&#x78;&#120;&#x78;&#x40;&#49;&#x2e;&#x30;&#46;&#48;</a> –save 这种方式来进行版本更新package-lock.json 文件才可以</p>\n</li>\n<li><p>加快了npm install 的速度，因为 package-lock.json 文件中已经记录了整个 node_modules 文件夹的树状结构，甚至连模块的下载地址都记录了，如果删除了nodel_modules模块，再重新安装的时候只需要直接下载文件即可</p>\n</li>\n</ol>\n</blockquote>\n<h3 id=\"如果我们全部选择’n’，就形成了更简单的文件目录结构\"><a href=\"#如果我们全部选择’n’，就形成了更简单的文件目录结构\" class=\"headerlink\" title=\"如果我们全部选择’n’，就形成了更简单的文件目录结构\"></a>如果我们全部选择’n’，就形成了更简单的文件目录结构</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">project</span><br><span class=\"line\">|\tREADME.md</span><br><span class=\"line\">|\t.editorconfig</span><br><span class=\"line\">|\t.gitignore</span><br><span class=\"line\">|\t.postcssrc.js</span><br><span class=\"line\">|\t.babelrc</span><br><span class=\"line\">|\tpackage.json</span><br><span class=\"line\">|\tpackage-lock.json</span><br><span class=\"line\">|\tindex.html</span><br><span class=\"line\">└---node_modules</span><br><span class=\"line\">└---config</span><br><span class=\"line\">|\t  |---dev.env.js</span><br><span class=\"line\">|\t  |---index.js</span><br><span class=\"line\">|\t  |---prod.env.js</span><br><span class=\"line\">└---build</span><br><span class=\"line\">|\t  |---build.js</span><br><span class=\"line\">|\t  |---check-versions.js</span><br><span class=\"line\">|\t  |---logo.png</span><br><span class=\"line\">|\t  |---utils.js</span><br><span class=\"line\">|\t  |---vue-loader.conf.js</span><br><span class=\"line\">|\t  |---webpack.base.conf.js</span><br><span class=\"line\">|\t  |---webpack.dev.conf.js</span><br><span class=\"line\">|\t  |---webpack.prod.conf.js</span><br><span class=\"line\">└---static</span><br><span class=\"line\">|\t  |---.gitkeep</span><br><span class=\"line\">└---src</span><br><span class=\"line\">\t  |---App.vue</span><br><span class=\"line\">\t  |---main.js</span><br><span class=\"line\">\t  └---router</span><br><span class=\"line\">\t  |\t\t|---index.js</span><br><span class=\"line\">\t  └---components</span><br><span class=\"line\">\t  |\t\t|---HelloWorld.vue</span><br><span class=\"line\">\t  └---assets</span><br><span class=\"line\">\t  \t\t|---logo.png</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"vue-create-详解\"><a href=\"#vue-create-详解\" class=\"headerlink\" title=\"vue create 详解\"></a>vue create 详解</h2><p>我们使用版本为4.5.13的vue-cli脚手架，选定vue3版本模板创建一个项目，项目文件目录结构如下</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">project</span><br><span class=\"line\">|\tREADME.md</span><br><span class=\"line\">|\t.gitignore</span><br><span class=\"line\">|\tbabel.config.js</span><br><span class=\"line\">|\tpackage.json</span><br><span class=\"line\">|\tpackage-lock.json</span><br><span class=\"line\">└---node_modules</span><br><span class=\"line\">└---public</span><br><span class=\"line\">|\t  |---favicon.ico</span><br><span class=\"line\">|\t  |---index.html</span><br><span class=\"line\">└---src</span><br><span class=\"line\">\t  |---App.vue</span><br><span class=\"line\">\t  |---main.js</span><br><span class=\"line\">\t  └---components</span><br><span class=\"line\">\t  |\t\t|---HelloWorld.vue</span><br><span class=\"line\">\t  └---assets</span><br><span class=\"line\">\t  \t\t|---logo.png</span><br></pre></td></tr></table></figure>\n\n<p>可以看到，使用vue-cli3之后版本脚手架的命令来创建的项目文件目录结构变得简单了许多。</p>\n<p><strong>babel.config.js</strong></p>\n<p>我们前面已经说过，babel是一个编译器，主要作用是将es5之后的语法转换成浏览器支持的es5语法。该文件存在于vue3.0根目录中，详见<a href=\"https://babeljs.io/docs/en/config-files#project-wide-configuration\">https://babeljs.io/docs/en/config-files#project-wide-configuration</a></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">presets</span>: [</span><br><span class=\"line\">    <span class=\"string\">&#x27;@vue/cli-plugin-babel/preset&#x27;</span></span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>我们看一下新版脚手架创建的package.json文件：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;vue_create&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;version&quot;</span>: <span class=\"string\">&quot;0.1.0&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;private&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;serve&quot;</span>: <span class=\"string\">&quot;vue-cli-service serve&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;build&quot;</span>: <span class=\"string\">&quot;vue-cli-service build&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;lint&quot;</span>: <span class=\"string\">&quot;vue-cli-service lint&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;dependencies&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;core-js&quot;</span>: <span class=\"string\">&quot;^3.6.5&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;vue&quot;</span>: <span class=\"string\">&quot;^3.0.0&quot;</span>\t\t\t<span class=\"comment\">//vue版本</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;devDependencies&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">//脚手架部分插件的版本</span></span><br><span class=\"line\">    <span class=\"string\">&quot;@vue/cli-plugin-babel&quot;</span>: <span class=\"string\">&quot;~4.5.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;@vue/cli-plugin-eslint&quot;</span>: <span class=\"string\">&quot;~4.5.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;@vue/cli-service&quot;</span>: <span class=\"string\">&quot;~4.5.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;@vue/compiler-sfc&quot;</span>: <span class=\"string\">&quot;^3.0.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;babel-eslint&quot;</span>: <span class=\"string\">&quot;^10.1.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;eslint&quot;</span>: <span class=\"string\">&quot;^6.7.2&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;eslint-plugin-vue&quot;</span>: <span class=\"string\">&quot;^7.0.0&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;eslintConfig&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;root&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;env&quot;</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&quot;node&quot;</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&quot;extends&quot;</span>: [</span><br><span class=\"line\">      <span class=\"string\">&quot;plugin:vue/vue3-essential&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;eslint:recommended&quot;</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">&quot;parserOptions&quot;</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&quot;parser&quot;</span>: <span class=\"string\">&quot;babel-eslint&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&quot;rules&quot;</span>: &#123;&#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;browserslist&quot;</span>: [</span><br><span class=\"line\">    <span class=\"string\">&quot;&gt; 1%&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;last 2 versions&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;not dead&quot;</span></span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","categories":[{"name":"Programming languages and projects","slug":"Programming-languages-and-projects","count":15,"path":"api/categories/Programming-languages-and-projects.json"},{"name":"JavaScript","slug":"Programming-languages-and-projects/JavaScript","count":6,"path":"api/categories/Programming-languages-and-projects/JavaScript.json"},{"name":"Vue","slug":"Programming-languages-and-projects/JavaScript/Vue","count":2,"path":"api/categories/Programming-languages-and-projects/JavaScript/Vue.json"}],"tags":[{"name":"vue","slug":"vue","count":2,"path":"api/tags/vue.json"},{"name":"vue-cli","slug":"vue-cli","count":2,"path":"api/tags/vue-cli.json"}]}