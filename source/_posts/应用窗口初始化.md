---
title: Pyqt5中的常用模块与组件

categories:

- Programming languages and projects

- Python3

- PYQT5

tags: 
- python3
- gui
---
# 应用窗口初始化



## QApplication与QWidget



QWidget控件是一个用户界面的基本控件，它提供了基本的应用构造器。默认情况下，构造器是没有父级的，没有父级的构造器被称为窗口（window）。

窗口类型简介[^1]
QMainWindow、QWidget、QDialog用于创建窗口，可以直接使用，也可以派生使用，这3个基类从名字上看分别是 "微件"、"对话框"、"主窗口。
QMainWindow窗口包含菜单栏、工具栏、状态栏、标题栏等，是最常见的窗口形式。
QDialog是对话框窗口的基类，主要用于执行短期任务，或与用户进行交互，可以是模态或非模态的。QDialog对话框没有菜单栏、工具栏、状态栏等。
QWidget是Qt图形组件的基类，可以作为顶层窗口，也可以嵌入到其它组件中。


在创建Qt Gui Application时，总会让你选择在QWidget,QMainWindow和QDialog中选择一个Base Class。

这三个类具体有什么区别呢？在Qt的手册和网上找了一些资料。

先看官方的手册中的介绍：

> QWidget Class Reference
The QWidget class is the base class of all user interface objects.
Inherits: QObject and QPaintDevice.
Inherited by: ……, QDialog, ……,QMainWindow, ……

>QDialog Class Reference
The QDialog class is the base class of dialog windows.
Inherits: QWidget.

>QMainWindow Class Reference
The QMainWindow class provides a main application window.
Inherits: QWidget.

可以看到QMainWindow和QDialog都是继承自QWidget。再看看下面那段从网上转过来的介绍，大概就能了解三者之间的区别了。

QWidget类是所有用户界面对象的基类。 窗口部件是用户界面的一个原子：它从窗口系统接收鼠标、键盘和其它事件，并且在屏幕上绘制自己的表现。每一个窗口部件都是矩形，并且它们按Z轴顺序排列的。一个窗口部件可以被它的父窗口部件或者它前面的窗口部件盖住一部分。

QMainWindow 类提供一个有菜单条、锚接窗口（例如工具条）和一个状态条的主应用程序窗口。主窗口通常用在提供一个大的中央窗口部件（例如文本编辑或者绘制画布）以及周围菜单、工具条和一个状态条。QMainWindow常常被继承，因为这使得封装中央部件、菜单和工具条以及窗口状态变得更容易。继承使创建当用户点击菜单项或者工具条按钮时被调用的槽成为可能。你也可以使用Qt设计器来创建主窗口。

QDialog类是对话框窗口的基类。对话框窗口是主要用于短期任务以及和用户进行简要通讯的顶级窗口。QDialog可以是模式的也可以是非模式的。QDialog支持扩展性并且可以提供返回值。它们可以有默认按钮。QDialog也可以有一个QSizeGrip在它的右下角，使用setSizeGripEnabled()。

QDialog 是最普通的顶级窗口。不被嵌入到一个父窗口部件的窗口部件被叫做顶级窗口部件。通常情况下，顶级窗口部件是有框架和标题栏的窗口（尽管如果使用了一定的窗口部件标记，创建顶级窗口部件时也可能没有这些装饰。）在Qt中，QMainWindow和和不同的QDialog的子类是最普通的顶级窗口。

综上，如果是顶级对话框，那就基于QDialog创建，如果是主窗体，那就基于QMainWindow，如果不确定，或者有可能作为顶级窗体，或有可能嵌入到其他窗体中，则基于QWidget创建。当然了，实际中，你还可以基于任何其他部件类来派生。看实际需求了，比如QFrame、QStackedWidget等等。


根据官方对QApplication的解释：
PyQt5.QtGui .QGuiApplication
继承自QCoreApplication，由PyQt5.QtWidgets .QApplication继承。
QApplication管理GUI程序的控制流和主要设置。
QApplication包含窗口系统和其他来源处理过和发送过的主事件循环。它也处理应用程序的初始化和收尾工作，并提供对话管理。
QApplication可以对系统和应用的大部分设置项进行设置。
对于用Qt写的任何一个GUI应用，不管这个应用有没有窗口或多少个窗口，有且只有一QApplication对象。
sys.argv是一组命令行参数的列表。Python可以在shell里运行，这个参数提供对脚本控制的功能
每一个PyQt5项目都需要创建一个 QApplication 对象。 sys.argv 则提供了命令行的一些参数，这样 Python 脚本就能从 Shell 运行，这是我们控制脚本开始运行的方式。



至于为什么需要sys.argv，可以看[stackoverflow上的这一个回答](https://stackoverflow.com/questions/27940378/why-do-i-need-sys-argv-to-start-a-qapplication-in-pyqt)：
This calls the constructor of the C++ class QApplication. 
It uses sys.argv (argc and argv in C++) to initialize the QT application. 
There are a bunch of arguments that you can pass to QT, like styles, debugging stuff and so on.
以及官方文档：https://doc.qt.io/qt-5/qapplication.html#QApplication



## Hello World实例



以下是一个来自[技术网站zetcode](www.zetcode.com)的实例代码
```python
#!/usr/bin/python3
# -*- coding: utf-8 -*-

"""
ZetCode PyQt5 tutorial 

In this example, we create a simple
window in PyQt5.

author: Jan Bodnar
website: zetcode.com 
Last edited: August 2017
"""

import sys
from PyQt5.QtWidgets import QApplication, QWidget


if __name__ == '__main__':

    app = QApplication(sys.argv)

    w = QWidget()
    w.resize(250, 150)
    w.move(300, 300)
    w.setWindowTitle('Simple')
    
    w.show()
    #QWidget类中的show()方法能让窗口在桌面上显示出来。注意窗口是在内存里创建，之后才能在显示器里显示出来

    sys.exit(app.exec_())
    '''
    调用exit()方法或直接销毁窗口时，主循环就会结束。sys.exit()方法能确保主循环安全退出。外部环境会收到窗口如何结束的信息。
    这里的方法exec_()之所以有个下划线，是因为exec是一个Python的关键字。
    '''
```



## 几个名词之间的区分



根据[技术网站zetcode[^2]提供的相关英文文档](https://www.zetcode.com/gui/pyqt5/firstprograms/)，内容如下：

> Here we provide the necessary imports. The basic widgets are located in `PyQt5.QtWidgets` module.

> ```
app = QApplication(sys.argv) ```

> Every PyQt5 application must create an application object. The `sys.argv` parameter is a list of arguments from a command line. Python scripts can be run from the shell. It is a way how we can control the startup of our scripts.

> ```
w = QWidget()```

> The `QWidget` widget is the base class of all user interface objects in PyQt5. We provide the default constructor for `QWidget`. The default constructor has no parent. A widget with no parent is called a window.





## References

[^1]: [QWidget,QMainWindow和QDialog的区别](https://blog.csdn.net/ikahn/article/details/6706284)
[^2]: [技术网站zetcode](www.zetcode.com)





